//******************************************************************************
// Секция include: здесь подключается заголовочный файл к модулю
#include "Lib_A_crc.h"
//******************************************************************************


//******************************************************************************
//------------------------------------------------------------------------------
// Глобальные переменные
//------------------------------------------------------------------------------


//------------------------------------------------------------------------------
// Локальные переменные
//------------------------------------------------------------------------------
//******************************************************************************


//******************************************************************************
// Секция прототипов локальных функций
//******************************************************************************


//******************************************************************************
// Секция описания функций (сначала глобальных, потом локальных)
//==============================================================================

uint8_t CRC_Crc8(uint8_t *pArr, uint16_t len)
{
    uint8_t crc = 0xFF;
    size_t i = 0;

    while (len--)
    {
        crc ^= *pArr++;
        for (i = 0; i < 8; i++)
        {
            crc = crc & 0x80 ? (crc << 1) ^ 0x31 : crc << 1;
        }
    }
    return crc;
}


uint16_t CRC_Crc16(uint8_t *pArr, uint16_t len)
{
    uint8_t crc = 0xFF;
    size_t i;

    while (len--)
    {
        crc ^= *pArr++ << 8;

        for (i = 0; i < 8; i++)
            crc = crc & 0x8000 ? (crc << 1) ^ 0x1021 : crc << 1;
    }
    return crc;
}

uint32_t CRC_Crc32(uint8_t *buf, uint16_t len)
{
    uint32_t crc_table[256];
    uint32_t crc;
    size_t i, j;

    for (i = 0; i < 256; i++)
    {
        crc = i;
        for (j = 0; j < 8; j++)
            crc = crc & 1 ? (crc >> 1) ^ 0xEDB88320UL : crc >> 1;

        crc_table[i] = crc;
    };

    crc = 0xFFFFFFFFUL;

    while (len--)
        crc = crc_table[(crc ^ *buf++) & 0xFF] ^ (crc >> 8);

    return crc ^ 0xFFFFFFFFUL;
}

uint16_t CRC_CCITT_16_bite_update(uint16_t crc, uint16_t data)
{
    uint16_t t;
    data ^= crc & 255;
    data ^= data << 4;
    t = (((uint16_t) data << 8) | ((crc >> 8)&255));
    t ^= (uint16_t) (data >> 4);
    t ^= ((uint16_t) data << 3);
    return t;
}
//==============================================================================
//******************************************************************************


//******************************************************************************
// END OF FILE
//******************************************************************************